{% capture date %}{{ page.date }}{{ post.date }}{% endcapture %}
{% capture day %}{{ page.day }}{{ post.day }}{% endcapture %}
{% capture month %}{{ page.month }}{{ post.month }}{% endcapture %}
{% capture year %}{{ page.year }}{{ post.year }}{% endcapture %}
{% capture date_formatted %}{{ page.date_formatted }}{{ post.date_formatted }}{% endcapture %}
{% capture has_date %}{{ date | size }}{% endcapture %}

{% capture updated %}{{ page.updated }}{{ post.updated }}{% endcapture %}
{% capture updated_formatted %}{{ page.updated_formatted }}{{ post.updated_formatted }}{% endcapture %}
{% capture was_updated %}{{ updated | size }}{% endcapture %}

{% if has_date != '0' %}
  {% if was_updated == '0' %}
    <time datetime="{{ date | datetime | date_to_xmlschema }}" pubdate class="date"><span class="day">{{ day }}</span><span class="month">{{ month }}</span><span class="year">{{ year }}</span></time>
{% else %}
    <time datetime="{{ updated | datetime | date_to_xmlschema }}" pubdate data-updated="true" title="Updated!" class="date updated"><span class="day">{{ day }}</span><span class="month">{{ month }}</span><span class="year">{{ year }}</span></time>
{% assign updated = false %}
  {% endif %}
{% endif %}
