
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Extending HAL Management Console - Harald Pehl</title>
  <meta name="author" content="Harald Pehl">

  
  <meta name="description" content="Extending HAL Management Console 26Jun2015 The HAL management console provides the UI to configure almost any subsystem in WildFly. However for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hpehl.info/extending-hal-management-console.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Rock+Salt" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Harald Pehl" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script>jQuery.noConflict();</script>
  <script src="/javascripts/moment.min.js"></script>
  <script src="/javascripts/ender.js"></script>
  
<script id="search-results-template" type="text/x-handlebars-template">
  {{#entries}}
    <article class="results" onclick="location.href='{{url}}'">
        <h1><a href="{{url}}">{{title}}</a></h1>
        <div class="meta">
            <time datetime="{{date}}" pubdate>{{date}}</time>
            {{#if categories}}
                <footer>
                    <span class="categories"><i class="fa fa-tags"></i> {{#each categories}}{{this}} {{/each}}</span>
                </footer>
            {{/if}}
        </div>
    </article>
  {{/entries}}
</script>


  <script src="/javascripts/lunr.min.js"></script>
  <script src="/javascripts/handlebars.js"></script>
  <script src="/javascripts/jxhr.js"></script>
  <script src="/javascripts/uri.min.js"></script>
  <script src="/javascripts/lunr-search.js"></script>
  <script src="/javascripts/classie.js"></script>
  <script src="/javascripts/mousetrap.min.js"></script>
  <script src="/javascripts/octopress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40396539-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
  <div class="md-modal md-effect-1" id="modal-1">
    <div class="md-content">
        <div class="md-close"><i class="fa fa-lg fa-times-circle-o"></i></div>
        <div class="query">
            <form method="get">
                <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off"/>
            </form>
        </div>
        <div id="search-results" class="results" style="display: none;">
            <div class="search-entries"></div>
        </div>
        <div class="footer"></div>
    </div>
</div>

  <div class="container">
    <header>
    <hgroup>
        <h1><a href="/">Harald Pehl</a></h1>
        
        <h2>Developer notes written down before they get lost.</h2>
        
    </hgroup>
    <div id="menu">
        <nav role="navigation">
    <ul class="main-navigation">
        <li class="search-icon"><i class="fa fa-search md-trigger" data-modal="modal-1" title="Search"></i></li>
        <li><a href="/">Blog</a></li>
        <li><a href="/blog/archives">Archives</a></li>
        <li><a href="/projects">Projects</a></li>
        <li><a href="/publications">Publications</a></li>
        <li><a href="/about">About</a></li>
    </ul>
</nav>

    </div>
</header>

    <div id="main">
      <div id="content">
        <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Extending HAL Management Console











  
    <time datetime="2015-06-26T14:49:00+02:00" pubdate class="date"><span class="day">26</span><span class="month">Jun</span><span class="year">2015</span></time>


</h1>
      
    
  </header>


  <div class="entry-content"><p>The HAL management console provides the UI to configure almost any subsystem in WildFly. However for subsystems provided by 3rd party projects like <a href="http://picketlink.org/">PicketLink</a>, <a href="http://teiid.jboss.org/">Teiid</a> or <a href="http://keycloak.jboss.org/">Keycloak</a> there&#8217;s no way to configure the management resources. This is where the HAL extensions come into play. They provide an easy way to extend the console and provide a frontend to configure the related subsystem. This blog post will walk through the process from creating an extension to including it in the HAL release stream.<!-- more --></p>

<h1>Background</h1>

<p>Before we start let me give you some technical background. The HAL management console is a GWT web application. It uses a maven build and depends mainly on <a href="https://code.google.com/p/google-gin/">GIN</a> for dependency injection and <a href="http://dev.arcbees.com/gwtp/">GWTP</a> for MVP. Extensions need to use the same stack and must create a maven artifact which is used by the <a href="https://github.com/hal/release-stream">HAL release stream</a> at <em>compile time</em>. As a result the final management console is produced. This means that the final console might contain many extensions. However the extensions will only show up if the relevant subsystem is part of WildFly. Furthermore since the console uses <a href="http://www.gwtproject.org/doc/latest/DevGuideCodeSplitting.html">code splitting</a> the extension&#8217;s bits &amp; pieces will only be loaded on demand.</p>

<h1>Get Started</h1>

<p>As of today extensions need to be developed against HAL 2.8.0 or greater. This in turn requires WildFly 10.x as target platform. To get started quickly we provide a <a href="https://github.com/hal/archetypes/tree/master/subsystem-extension">maven archetype</a>. The archetype creates an extension with a presenter / view tuple to edit the top level attributes of a given subsystem.</p>

<p>Besides the regular maven coordinates like <code>groupId</code>, <code>artifactId</code> et al the archetypes uses the following parameters:</p>

<ul>
<li><code>extensionName</code>: The name / title of the extension as it appears in the UI. Should be a human friendly term which can contains spaces.</li>
<li><code>gwtModule</code> The name of the GWT module w/o the <code>.gwt.xml</code> suffix. Must not contain whitespace.</li>
<li><code>subsystem</code>: The name of the subsystem. The extension will only show up in the UI if the subsystem is configured in standalone mode or is part of the selected profile in domain mode.</li>
<li><code>nameToken</code>: An unique name token used to identify the extension&#8217;s page in the UI. Should be an all lowercase string separated with dashes. Defaults to the subsystem name. See the <a href="http://dev.arcbees.com/gwtp/features/PlaceManager.html">GWTP documentation</a> for more infos about place management.</li>
</ul>


<p>The archetype is deployed to the <a href="https://repository.jboss.org/nexus/index.html#welcome">JBoss Maven Repository</a>. In order to use it, make sure to specify the catalog flag <code>-DarchetypeCatalog=https://repository.jboss.org</code>.</p>

<h2>Request Controller</h2>

<p>Let&#8217;s say we want to develop an extension for the subsystem <code>request-controller</code>. This subsystem is used for request limiting and graceful shutdown and is currently not covered in the HAL management console. Open a shell and execute</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mvn archetype:generate \
</span><span class='line'>    -DarchetypeCatalog=https://repository.jboss.org \
</span><span class='line'>    -DarchetypeGroupId=org.jboss.hal.archetypes \
</span><span class='line'>    -DarchetypeArtifactId=hal-subsystem-extension-archetype</span></code></pre></td></tr></table></div></figure>


<p>After providing all required parameters you should end up with a new maven project which consists of two sub modules:</p>

<ul>
<li><code>gui</code>: Contains the GWT code for the extension</li>
<li><code>app</code>: Provides a GWT module to run and test the extension</li>
</ul>


<p>Before we dive into the details, here&#8217;s a preview of what the extension is going to look like in the navigation, read-only and edit mode:</p>

<p><figure class="centered"><img src="/images/posts/extension_1.png" title="&#34;Navigation&#34;" alt="&#34;Navigation&#34;"></figure>
<figure class="centered"><img src="/images/posts/extension_2.png" title="&#34;Read-only mode&#34;" alt="&#34;Read-only mode&#34;"></figure>
<figure class="centered"><img src="/images/posts/extension_3.png" title="&#34;Edit mode&#34;" alt="&#34;Edit mode&#34;"></figure></p>

<h1>Develop</h1>

<p>The development of the extension happens in the <code>gui</code> module. The archetype creates all necessary building blocks:</p>

<ul>
<li>a presenter / view tuple</li>
<li>the GIN / GWTP mixins</li>
<li>i18n helper classes</li>
</ul>


<h2>Presenter / View Tuple</h2>

<p>The GWTP presenter includes the proxy interface which carries the <code>@SubsystemExtension</code> annotation. This annotation marks the enclosing presenter as extension. The view interface defines one method to update the view with the subsystem data. Finally there are two methods to load and save the subsystem attributes.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExtensionPresenter</span>
</span><span class='line'>        <span class="kd">extends</span> <span class="n">Presenter</span><span class="o">&lt;</span><span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">MyView</span><span class="o">,</span> <span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">MyProxy</span><span class="o">&gt;</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">ROOT_RESOURCE</span> <span class="o">=</span> <span class="s">&quot;{selected.profile}/subsystem=request-controller&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">AddressTemplate</span> <span class="n">ROOT_RESOURCE_ADDRESS</span> <span class="o">=</span> <span class="n">AddressTemplate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">ROOT_RESOURCE</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@ProxyCodeSplit</span>
</span><span class='line'>    <span class="nd">@NameToken</span><span class="o">(</span><span class="s">&quot;request-controller&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="nd">@RequiredResources</span><span class="o">(</span><span class="n">resources</span> <span class="o">=</span> <span class="n">ROOT_RESOURCE</span><span class="o">)</span>
</span><span class='line'>    <span class="nd">@SearchIndex</span><span class="o">(</span><span class="n">keywords</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;request-controller&quot;</span><span class="o">})</span>
</span><span class='line'>    <span class="nd">@SubsystemExtension</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Request Controller&quot;</span><span class="o">,</span> <span class="n">group</span> <span class="o">=</span> <span class="s">&quot;Extensions&quot;</span><span class="o">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s">&quot;request-controller&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyProxy</span> <span class="kd">extends</span> <span class="n">ProxyPlace</span><span class="o">&lt;</span><span class="n">ExtensionPresenter</span><span class="o">&gt;</span> <span class="o">{}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyView</span> <span class="kd">extends</span> <span class="n">View</span><span class="o">,</span> <span class="n">HasPresenter</span><span class="o">&lt;</span><span class="n">ExtensionPresenter</span><span class="o">&gt;</span> <span class="o">{</span>
</span><span class='line'>        <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="n">ModelNode</span> <span class="n">data</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StatementContext</span> <span class="n">statementContext</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">DispatchAsync</span> <span class="n">dispatcher</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">CrudOperationDelegate</span> <span class="n">operationDelegate</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">I18n</span> <span class="n">i18n</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Inject</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ExtensionPresenter</span><span class="o">(</span><span class="kd">final</span> <span class="n">EventBus</span> <span class="n">eventBus</span><span class="o">,</span> <span class="kd">final</span> <span class="n">MyView</span> <span class="n">view</span><span class="o">,</span> <span class="kd">final</span> <span class="n">MyProxy</span> <span class="n">proxy</span><span class="o">,</span>
</span><span class='line'>            <span class="kd">final</span> <span class="n">StatementContext</span> <span class="n">statementContext</span><span class="o">,</span> <span class="kd">final</span> <span class="n">DispatchAsync</span> <span class="n">dispatcher</span><span class="o">,</span> <span class="kd">final</span> <span class="n">I18n</span> <span class="n">i18n</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">(</span><span class="n">eventBus</span><span class="o">,</span> <span class="n">view</span><span class="o">,</span> <span class="n">proxy</span><span class="o">,</span> <span class="n">MainLayoutPresenter</span><span class="o">.</span><span class="na">TYPE_MainContent</span><span class="o">);</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">statementContext</span> <span class="o">=</span> <span class="n">statementContext</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">dispatcher</span> <span class="o">=</span> <span class="n">dispatcher</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">i18n</span> <span class="o">=</span> <span class="n">i18n</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">operationDelegate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CrudOperationDelegate</span><span class="o">(</span><span class="n">statementContext</span><span class="o">,</span> <span class="n">dispatcher</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">[...]</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">loadSubsystem</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Operation</span> <span class="n">operation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Operation</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">READ_RESOURCE_OPERATION</span><span class="o">,</span>
</span><span class='line'>                <span class="n">ROOT_RESOURCE_ADDRESS</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">statementContext</span><span class="o">)).</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>        <span class="n">dispatcher</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">DMRAction</span><span class="o">(</span><span class="n">operation</span><span class="o">),</span> <span class="k">new</span> <span class="n">SimpleCallback</span><span class="o">&lt;</span><span class="n">DMRResponse</span><span class="o">&gt;()</span> <span class="o">{</span>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="kd">final</span> <span class="n">DMRResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">ModelNode</span> <span class="n">body</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
</span><span class='line'>                <span class="k">if</span> <span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">isFailure</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>                    <span class="n">Console</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">i18n</span><span class="o">.</span><span class="na">extensionConstants</span><span class="o">().</span><span class="na">load_failed</span><span class="o">(),</span> <span class="n">body</span><span class="o">.</span><span class="na">getFailureDescription</span><span class="o">());</span>
</span><span class='line'>                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>                    <span class="n">getView</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">RESULT</span><span class="o">));</span>
</span><span class='line'>                <span class="o">}</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">});</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSaveResource</span><span class="o">(</span><span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">changedValues</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">operationDelegate</span><span class="o">.</span><span class="na">onSaveResource</span><span class="o">(</span><span class="n">ROOT_RESOURCE_ADDRESS</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">changedValues</span><span class="o">,</span>
</span><span class='line'>                <span class="k">new</span> <span class="n">CrudOperationDelegate</span><span class="o">.</span><span class="na">Callback</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>                    <span class="nd">@Override</span>
</span><span class='line'>                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="kd">final</span> <span class="n">AddressTemplate</span> <span class="n">addressTemplate</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                        <span class="n">Console</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">i18n</span><span class="o">.</span><span class="na">consoleMessages</span><span class="o">().</span><span class="na">modificationFailed</span><span class="o">(</span><span class="s">&quot;subsystem &#39;request-controller&#39;&quot;</span><span class="o">),</span>
</span><span class='line'>                                <span class="n">t</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
</span><span class='line'>                    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>                    <span class="nd">@Override</span>
</span><span class='line'>                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="kd">final</span> <span class="n">AddressTemplate</span> <span class="n">addressTemplate</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                        <span class="n">Console</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">i18n</span><span class="o">.</span><span class="na">consoleMessages</span><span class="o">().</span><span class="na">modified</span><span class="o">(</span><span class="s">&quot;subsystem &#39;request-controller&#39;&quot;</span><span class="o">));</span>
</span><span class='line'>                        <span class="n">loadSubsystem</span><span class="o">();</span>
</span><span class='line'>                    <span class="o">}</span>
</span><span class='line'>                <span class="o">});</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The view creates a form based on the subsystem metadata. When the user clicks save, control is delegated to the presenter which executes the relevant DMR operations to store the updated attributes in the management model.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExtensionView</span> <span class="kd">extends</span> <span class="n">SuspendableViewImpl</span> <span class="kd">implements</span> <span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">MyView</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ResourceDescriptionRegistry</span> <span class="n">descriptionRegistry</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SecurityFramework</span> <span class="n">securityFramework</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="n">ExtensionPresenter</span> <span class="n">presenter</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">ModelNodeForm</span> <span class="n">form</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Inject</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ExtensionView</span><span class="o">(</span><span class="kd">final</span> <span class="n">ResourceDescriptionRegistry</span> <span class="n">descriptionRegistry</span><span class="o">,</span>
</span><span class='line'>            <span class="kd">final</span> <span class="n">SecurityFramework</span> <span class="n">securityFramework</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">securityFramework</span> <span class="o">=</span> <span class="n">securityFramework</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">descriptionRegistry</span> <span class="o">=</span> <span class="n">descriptionRegistry</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Widget</span> <span class="nf">createWidget</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">SecurityContext</span> <span class="n">securityContext</span> <span class="o">=</span> <span class="n">securityFramework</span><span class="o">.</span><span class="na">getSecurityContext</span><span class="o">(</span><span class="n">presenter</span><span class="o">.</span><span class="na">getProxy</span><span class="o">().</span><span class="na">getNameToken</span><span class="o">());</span>
</span><span class='line'>        <span class="n">ResourceDescription</span> <span class="n">resourceDescription</span> <span class="o">=</span> <span class="n">descriptionRegistry</span><span class="o">.</span><span class="na">lookup</span><span class="o">(</span>
</span><span class='line'>                <span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">ROOT_RESOURCE_ADDRESS</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">ModelNodeFormBuilder</span><span class="o">.</span><span class="na">FormAssets</span> <span class="n">formAssets</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelNodeFormBuilder</span><span class="o">()</span>
</span><span class='line'>                <span class="o">.</span><span class="na">setConfigOnly</span><span class="o">()</span>
</span><span class='line'>                <span class="o">.</span><span class="na">setResourceDescription</span><span class="o">(</span><span class="n">resourceDescription</span><span class="o">)</span>
</span><span class='line'>                <span class="o">.</span><span class="na">setSecurityContext</span><span class="o">(</span><span class="n">securityContext</span><span class="o">)</span>
</span><span class='line'>                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">form</span> <span class="o">=</span> <span class="n">formAssets</span><span class="o">.</span><span class="na">getForm</span><span class="o">();</span>
</span><span class='line'>        <span class="n">form</span><span class="o">.</span><span class="na">setToolsCallback</span><span class="o">(</span><span class="k">new</span> <span class="n">FormCallback</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSave</span><span class="o">(</span><span class="n">Map</span> <span class="n">changedValues</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">presenter</span><span class="o">.</span><span class="na">onSaveResource</span><span class="o">(</span><span class="n">changedValues</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCancel</span><span class="o">(</span><span class="n">Object</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">form</span><span class="o">.</span><span class="na">cancel</span><span class="o">();</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">});</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleLayout</span><span class="o">()</span>
</span><span class='line'>                <span class="o">.</span><span class="na">setPlain</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
</span><span class='line'>                <span class="o">.</span><span class="na">setHeadline</span><span class="o">(</span><span class="s">&quot;Request Controller&quot;</span><span class="o">)</span>
</span><span class='line'>                <span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="n">SafeHtmlUtils</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="n">resourceDescription</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">DESCRIPTION</span><span class="o">).</span><span class="na">asString</span><span class="o">()))</span>
</span><span class='line'>                <span class="o">.</span><span class="na">addContent</span><span class="o">(</span><span class="s">&quot;Attributes&quot;</span><span class="o">,</span> <span class="n">formAssets</span><span class="o">.</span><span class="na">asWidget</span><span class="o">())</span>
</span><span class='line'>                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">[...]</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="kd">final</span> <span class="n">ModelNode</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">form</span><span class="o">.</span><span class="na">edit</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>GIN / GWTP Mixins</h2>

<p>These mixins are needed to extend the dependency injection scope and wire up the presenters / view tuples. A mixin is declared both as a binding and model extension. The <code>@GinExtension</code> value refers the GWT module descriptor used with the extension.</p>

<p>The injection points:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@GinExtension</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Extension</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">AsyncProvider</span><span class="o">&lt;</span><span class="n">ExtensionPresenter</span><span class="o">&gt;</span> <span class="nf">getExtensionPresenter</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The actual binding:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@GinExtensionBinding</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExtensionBinding</span> <span class="kd">extends</span> <span class="n">AbstractPresenterModule</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">bindPresenter</span><span class="o">(</span><span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
</span><span class='line'>                <span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">MyView</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
</span><span class='line'>                <span class="n">ExtensionView</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
</span><span class='line'>                <span class="n">ExtensionPresenter</span><span class="o">.</span><span class="na">MyProxy</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Helper Classes</h2>

<p>Finally the archetype creates some helper classes to deal with i18n constants and messages. It provides both access to HAL&#8217;s constants and messages and to the resources defined by the extension:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">I18n</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">UIConstants</span> <span class="n">consoleConstants</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">UIMessages</span> <span class="n">consoleMessages</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ExtensionConstants</span> <span class="n">extensionConstants</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ExtensionMessages</span> <span class="n">extensionMessages</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Inject</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">I18n</span><span class="o">(</span><span class="kd">final</span> <span class="n">UIConstants</span> <span class="n">consoleConstants</span><span class="o">,</span> <span class="kd">final</span> <span class="n">UIMessages</span> <span class="n">consoleMessages</span><span class="o">,</span>
</span><span class='line'>            <span class="kd">final</span> <span class="n">ExtensionConstants</span> <span class="n">extensionConstants</span><span class="o">,</span> <span class="kd">final</span> <span class="n">ExtensionMessages</span> <span class="n">extensionMessages</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">consoleConstants</span> <span class="o">=</span> <span class="n">consoleConstants</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">consoleMessages</span> <span class="o">=</span> <span class="n">consoleMessages</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">extensionConstants</span> <span class="o">=</span> <span class="n">extensionConstants</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">extensionMessages</span> <span class="o">=</span> <span class="n">extensionMessages</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">UIConstants</span> <span class="nf">consoleConstants</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">consoleConstants</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">UIMessages</span> <span class="nf">consoleMessages</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">consoleMessages</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">ExtensionConstants</span> <span class="nf">extensionConstants</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">extensionConstants</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">ExtensionMessages</span> <span class="nf">extensionMessages</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">extensionMessages</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Run</h1>

<p>To launch the extension, switch to the <code>app</code> directory and execute one of the following:</p>

<ul>
<li><code>mvn gwt:run</code> for GWT SuperDevMode</li>
<li><code>mvn gwt:run|debug -Dgwt.superDevMode=false</code> to use the old DevMode. Please note that you&#8217;ll need <a href="http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/26.0/">Firefox &lt;= 26</a> and the <a href="http://www.gwtproject.org/missing-plugin/">GWT plugin</a> to use DevMode.</li>
</ul>


<p>You&#8217;ll need a running WildFly instance which is configured to allow access from http://localhost:8888. Use one of the following CLI commands to configure the management endpoint:</p>

<ul>
<li><p>standalone mode:</p>

<pre><code>  /core-service=management/management-interface=http-interface:list-add(name=allowed-origins,value=http://localhost:8888)
  reload
</code></pre></li>
<li><p>domain mode:</p>

<pre><code>  /host=master/core-service=management/management-interface=http-interface:list-add(name=allowed-origins,value=http://localhost:8888)
  reload --host=master
</code></pre></li>
</ul>


<p>Please note that the extension will only show up in the UI if the subsystem is configured in standalone mode or is part of the selected profile in domain mode.</p>

<h1>Include</h1>

<p>The <a href="https://github.com/hal/release-stream">HAL release stream</a> is a maven build which combines different extensions at <em>compile time</em> and generates a final management console. You can clone its repository to test the build with your extension. Please contact us if you want to include your extension into the release stream.</p>

<h1>Resources</h1>

<p>Most of the topics in this blog post are also covered in the <a href="http://hal.gitbooks.io/dev/content/">official HAL documentation</a>. See the section <a href="http://hal.gitbooks.io/dev/content/building-blocks/extensions.html">Building Blocks / Extensions</a> for more details.</p>

<h1>It&#8217;s your turn</h1>

<p>Now if you want to write your own extension, great - go ahead! If you have any questions or comments, please do not hesitate to <a href="http://hal.gitbooks.io/dev/content/community/index.html">contact</a> us.</p>
</div>


  <footer class="line">
    <p class="meta">
      <span>
        

<i title="Categories" class="categories fa fa-tags fa-lg">
  
    <a class='category' href='/blog/categories/console/'>console</a>, <a class='category' href='/blog/categories/extension/'>extension</a>, <a class='category' href='/blog/categories/hal/'>hal</a>, <a class='category' href='/blog/categories/jboss/'>jboss</a>
  
</i>


        
          <a class="sharing tweet" title="Share on Twitter" href="http://twitter.com/share?url=http://hpehl.info/extending-hal-management-console.html"><i class="fa fa-twitter fa-lg"></i></a>
<a class="sharing gplus" title="Share on Google+" href="https://plus.google.com/share?url=http://hpehl.info/extending-hal-management-console.html"><i class="fa fa-google-plus-square fa-lg"></i></a>
<a class="sharing facebook" title="Share on Facebook" href="http://www.facebook.com/sharer.php?u=http://hpehl.info/extending-hal-management-console.html"><i class="fa fa-facebook fa-lg"></i></a>

        
      </span>
      <span>
        
          <a class="articlenav" href="/jdbc-driver-setup.html" title="Previous Post: JDBC Driver Setup">&larr; JDBC Driver Setup</a>
        
        
      </span>
    </p>
  </footer>
</article>

  <section>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

      </div>
    </div>
    <footer role="contentinfo"><p>
    Copyright &copy; 2015 - Harald Pehl - <a href="/disclaimer">Disclaimer</a>
    <span class="basic-alignment right">
        <a class="rss" href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><i class="fa fa-rss fa-lg"></i></a>
    </span>
</p>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'hpehl';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://hpehl.info/extending-hal-management-console.html';
        var disqus_url = 'http://hpehl.info/extending-hal-management-console.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<script>
    $('a[class*=facebook]').on('click', function(e) {
        e.preventDefault();
        var width  = 575,
                height = 400,
                left   = window.screenLeft + (window.innerWidth - width) / 2,
                top    = window.screenTop + (window.innerHeight - height) / 2,
                url    = this.href,
                opts   = 'status=1' +
                        ',width='  + width  +
                        ',height=' + height +
                        ',top='    + top    +
                        ',left='   + left;
        window.open(url, 'twitter', opts);
    });
</script>



  <script type="text/javascript">
      $('a[class*=gplus]').on('click', function(e) {
          e.preventDefault();
          var width  = 650,
                  height = 300,
                  left   = window.screenLeft + (window.innerWidth - width) / 2,
                  top    = window.screenTop + (window.innerHeight - height) / 2,
                  url    = this.href,
                  opts   = 'status=1' +
                          ',width='  + width  +
                          ',height=' + height +
                          ',top='    + top    +
                          ',left='   + left;
          window.open(url, 'twitter', opts);
      });
  </script>



<script>
    $('a[class*=tweet]').on('click', function(e) {
        e.preventDefault();
        var width  = 575,
            height = 400,
            left   = window.screenLeft + (window.innerWidth - width) / 2,
            top    = window.screenTop + (window.innerHeight - height) / 2,
            url    = this.href,
            opts   = 'status=1' +
                    ',width='  + width  +
                    ',height=' + height +
                    ',top='    + top    +
                    ',left='   + left;
        window.open(url, 'twitter', opts);
    });
</script>



  </div>
  <div class="md-overlay"></div>
  <script src="/javascripts/search-popup.js"></script>
  <!--[if !(lt IE 8)]><!-->
  <script type="text/javascript">
      (function(){
          var e = document.createElement('script'); e.type='text/javascript'; e.async = true;
          e.src = document.location.protocol + '//d1agz031tafz8n.cloudfront.net/thedaywefightback.js/widget.min.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(e, s);
      })();
  </script>
  <!--<![endif]-->
</body>
</html>
